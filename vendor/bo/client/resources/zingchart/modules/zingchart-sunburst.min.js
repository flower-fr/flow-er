/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.14
*/
zingchart.setModule("sunburst"),function(){var e={},t={},a={},r={},l={},i={},n={};zingchart.bind(null,"dataparse",function(o,d){var s,p,h,u,v,g,c,f,x,_=zingchart.getLoader(o.id);for(n[o.id]?n[o.id]!==_.I+"/"+_.F&&(d=JSON.parse(_.E.source),n[o.id]=_.I+"/"+_.F):n[o.id]=_.I+"/"+_.F,u=0,v=d.graphset.length;u<v;u++)if(d.graphset[u].type&&"sunburst"===d.graphset[u].type){e[o.id]=!0,r[o.id]||(r[o.id]={}),l[o.id]||(l[o.id]=-1),i[o.id]=[],t[o.id]||(t[o.id]=JSON.stringify(d));var b=d.graphset[u].type;d.graphset[u]["plugin-type"]=b;var z=d.graphset[u];zingchart.normalize(z),z.type="pie";var C=zingchart.getGraphInfo(_,d,u),y={};z.options&&(y=z.options[b]||z.options),ZC._todash_(y);var Z=y.root||"";a[o.id]=Z;var m=ZC._i_(y.slice||"0"),A=ZC._f_(y["size-factor"]||"0.95"),w=ZC._i_(y.space||"0"),F=y.widths||[],k=y.palette||["#6A921F","#007FA3","#A62B02","#B79007","#563D02","#0B32A0","#00BAF2","#E80C60","#E2D51A","#9B26AF","#FB301E","#00AE4D","#20398B"],B=y["text-attr"]||"text",D=y["value-attr"]||"value";if(z.series=z.series||[],!(z.series instanceof Array)){var O=[],E={},I=function(e,t){var a=(e.text||e.name||e[B]).toLowerCase().replace(/[^a-z0-9_]+/gi,"");E[a]?a+=E[a]++:E[a]=1;var r={id:a,text:e.text||e.name||e[B]||a,value:e.value||e.size||e[D],parent:t||""};if(O.push(r),e.children)for(var l=0;l<e.children.length;l++)I(e.children[l],a)};I(z.series,""),z.series=O}for(var J,M={},L=[].concat(z.series).reverse(),N=0,P=L.length,S=0;L.length&&P-- >=0;)for(s=L.length-1;s>=0;s--)for(J in g=(c=L[s]).id||"id"+N++,""===(x=c.parent||"")?(M[g]={id:g,level:0,parent:"",text:c.text||c.name||c[B]||g,value:c.value||c.size||c[D],children:[]},i[o.id].push(g),L.splice(s,1)):M[x]&&(M[x].children.push(g),M[g]={id:g,level:M[x].level+1,parent:x,text:c.text||c.name||c[B]||g,value:c.value||c.size||c[D],children:[]},L.splice(s,1),S=Math.max(S,M[g].level)),c)0===J.indexOf("data-")&&(M[g][J]=c[J]);var T=function(e,t){return t=t||[],M[e]&&""!==M[e].parent&&(t.push(M[e].parent),t=t.concat(T(M[e].parent))),t};if(""!==Z){for(g in M)g!==Z?(f=T(g),-1===ZC.AV(f,Z)&&delete M[g]):(M[g]["up-parent"]=M[g].parent,M[g].parent="");var V=M[Z].level;for(g in M)M[g].level-=V;S-=V}var j=0,G=0;for(h=0;h<=S;h++){if(0===h)for(g in M)0===M[g].level&&G++;for(g in M){var q="";r[o.id][g]?q=r[o.id][g]:(M[g].level===h&&(q=0===M[g].level||1===M[g].level&&1===G?k[j++%k.length]:M[M[g].parent].color),r[o.id][g]=q),M[g].color=q}}var H=function(e){if(M[e]){if(null===ZC._n_(M[e].value))if(0===M[e].children.length)M[e].value=0;else{for(var t=0,a=0;a<M[e].children.length;a++)t+=H(M[e].children[a]);M[e].value=t}return parseFloat(M[e].value)}};for(g in M)M[g].value=H(g);if(-1===l[o.id]){for(g in M)if(0!==M[g].level&&(1!==M[g].level||1!==G)&&r[o.id][g]){f=T(g);var K=1===G?f[f.length-2]:f[f.length-1],Q=1-M[g].value/M[K].value;r[o.id][g]=M[g].color=ZC.AP.PM(M[g].color,40*Q)}l[o.id]=1}var R=[],U=0;for(h=0;h<=S;h++){if(R[h]){var W=[];for(s=0;s<R[h].length;s++){var X=(c=M[R[h][s]]).children,Y=0;for(p=0;p<X.length;p++)W.push(X[p]),Y+=M[X[p]].value;if(Y<c.value){var $="sbfakeid"+U++;M[$]={id:$,parent:c.id,value:c.value-Y,level:c.level,children:[],fake:!0,color:c.color},W.push($)}}R[h]=[].concat(W)}else for(g in R[h]=[],M)M[g].level===h&&R[h].push(g);h<S&&(R[h+1]=[].concat(R[h]))}d.graphset.splice(u,1);var ee={};ZC._cp_(z,ee),delete ee.options,delete ee.series,delete ee["no-data"],ee["background-color"]="none",ee.x=C.graph.x,ee.y=C.graph.y,ee.width=C.graph.width,ee.height=C.graph.height,ee.plot=ee.plot||{},ee.plot["value-box"]=ee.plot["value-box"]||{},ee.plot["value-box"].placement=ee.plot["value-box"].placement||"radial",ee.plot.detach=!1;for(var te=["plotarea","legend","title","subtitle","source"],ae=0;ae<te.length;ae++)ee[te[ae]]&&delete ee[te[ae]]["adjust-layout"];var re=A*(Math.min(C.plotarea.width,C.plotarea.height)/2-m-S*w),le=ZC._i_(re/(S+1));for(h=0;h<=S;h++){var ie={};if(ZC._cp_(ee,ie),h>0&&(delete ie.title,delete ie.subtitle,delete ie.source,delete ie.legend,delete ie["no-data"]),ie.id="glvl"+h,0===F.length)ie.plot.size=m+le*(h+1)+w*h,ie.plot.slice=m+le*h+w*h;else{for(var ne=0,oe=0;oe<h;oe++)ne+=F[oe]||le;ie.plot.slice=m+ne+w*h,ne+=F[h]||le,ie.plot.size=m+ne+w*h}ie.series=[];var de=-1;for(s=0;s<R[h].length;s++){var se=M[R[h][s]].text,pe=se,he=M[R[h][s]].id;for(J in x=M[R[h][s]]["up-parent"]||M[R[h][s]].parent,0===h&&(""!==x||1===G&&i[o.id].length>1&&-1!==ZC.AV(i[o.id],he))&&(pe="\u25b2 "+pe),c={"data-l0items":G,"data-parent":x,"data-uid":he,"data-level":M[R[h][s]].level,"data-vbtext":pe,text:se,values:[M[R[h][s]].value],"background-color":M[R[h][s]].color,"hover-state":{"background-color":ZC.AP.JO(M[R[h][s]].color,20)}},M[R[h][s]])0===J.indexOf("data-")&&(c[J]=M[R[h][s]][J]);M[R[h][s]].fake&&(c.visible=!1),M[R[h][s]].fake?-1===de?(ie.series.push(c),de=ie.series.length-1):ie.series[de].values[0]+=c.values[0]:(de=-1,ie.series.push(c))}d.graphset.splice(u,0,ie)}var ue={};ZC._cp_(z,ue),delete ue.options,delete ue.series,delete ue.legend,delete ue["no-data"],ue.type="pie";for(te=["plotarea","legend","title","subtitle","source"],ae=0;ae<te.length;ae++)ue[te[ae]]&&delete ue[te[ae]]["adjust-layout"];ue.x=C.graph.x,ue.y=C.graph.y,ue.width=C.graph.width,ue.height=C.graph.height,d.graphset.splice(u,0,ue)}return d});var o=null;zingchart.bind(null,"node_click",function(e){if("touchend"===e.ev.type){if(null===o)return void(o=(new Date).getTime());if((new Date).getTime()-o>=300)return void(o=(new Date).getTime());o=null}else if(0!==e.ev.button)return;var r=zingchart.getLoader(e.id);if(r){var l=zingchart.getGraph(r,e.graphid);if(l&&"sunburst"===l.o["plugin-type"]){var n=JSON.parse(t[e.id]);n.graphset[0].options=n.graphset[0].options||{},null!==ZC._n_(n.graphset[0].options.flat)&&ZC._b_(n.graphset[0].options.flat)||(""!==e["data-parent"]||e["data-l0items"]>1||i[e.id].length>1&&-1!==ZC.AV(i[e.id],e["data-uid"]))&&(a[e.id]===e["data-uid"]?n.graphset[0].options.root=e["data-parent"]:n.graphset[0].options.root=e["data-uid"],zingchart.exec(e.id,"setdata",{data:n}))}}});zingchart.bind(null,"destroy",function(o){e[o.id]&&(delete e[o.id],delete n[o.id],t={},a={},r={},l={},i={})})}();