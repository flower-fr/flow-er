/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.14
*/
ZC.WK.push("nestedpie"),ZC.A6Q=ZC.JL.CC({$i:function(n){this.b(n);var i=this;i.AF="nestedpie",i.B0=new ZC.A5A(i)},A2Q:function(n){return n},MT:function(n){switch(n){case"m":return new ZC.TA(this)}},ACO:function(){var n=this,i=n.MT("m","scale");i.BF="scale",i.K=n.K+"-scale",n.BO.push(i),n.b()}}),ZC.A5A=ZC.LQ.CC({$i:function(n){this.b(n);this.KO=[],this.P8=[]},ACU:function(){return new ZC.U0(this)},parse:function(){var n=this;n.KO=[],n.P8=[],n.b();for(var i,t=n.A.BM("scale"),C=t.iX+t.I/2,e=1,a=0,A=n.A3.length;a<A;a++)if(n.C.E["plot"+a+".visible"]||"hide"===n.C.getToggleAction())for(var l=0,s=n.A3[a].S.length;l<s;l++)if(n.A3[a].S[l]){var o=n.A3[a].S[l];null===ZC._n_(n.P8[l])&&(n.P8[l]=n.A3[a].DJ);var r=n.P8[l],B=r+360*o.AB/n.KO[l];n.P8[l]=B,o.B4=r,o.BL=B;var Z=o.GZ(!0);if(Z&&"in"!==Z.o.placement){var c=ZC._i_((r+B)/2);i=((c>=0&&c<=90||c>=270&&c<=360?t.iX+t.I-(Z.I+25):t.iX+(Z.I+25))-C)/ZC.EE(c),e=ZC.CY(e,2*i/t.I),i=t.F/2-(Z.F/2+10),e=ZC.CY(e,2*i/t.F)}}e=ZC.BQ(.15,ZC.CY(.85,e)),"auto"===t.o["size-factor"]&&(t.o["size-factor"]=t.JS=e)}}),ZC.U0=ZC.HY.CC({$i:function(n){this.b(n);var i=this;i.AF="nestedpie",i.BO=["scale"],i.U5=0,i.SO=0,i.DJ=0,i.C3=null,i.P5="bg",i.aBandWidths=null},U1:function(){return new ZC.A4B(this)},parse:function(){var n,i,t=this;t.BP=t.O3(),t.C2=t.BP[0],t.A0=t.BP[1],t.AE=t.BP[2],t.BX=t.BP[0],t.B9=t.BP[0],t.NR(),t.b(),t.U&&(t.C3=new ZC.CZ(t),t.C.A.B6.load(t.C3.o,["graph.plot.value-box.connector",t.AF+".plot.value-box.connector"]),null!==ZC._n_(n=t.C.o.plot)&&null!==ZC._n_(n["value-box"])&&null!==ZC._n_(i=n["value-box"].connector)&&t.C3.append(i),t.C3.append(t.o["value-box"].connector)),t.assign_a([["slice-start","U5","fp"],["offset","U5","fp"],["slice","U5","fp"],["band-space","SO","fp"],["ref-angle","DJ","i"],["band-widths","aBandWidths"]]),t.DJ%=360;for(var C=0,e=t.S.length;C<e;C++)t.S[C]&&(t.C.E["plot"+t.L+".visible"]||"hide"===t.C.getToggleAction())&&(null===ZC._n_(t.A.KO[C])&&(t.A.KO[C]=0),t.A.KO[C]+=ZC._f_(t.S[C].AB))},paint:function(){var n=this;n.b(),n.KH=n.CR("bl",0),n.PF(!0)}}),ZC.A4B=ZC.LM.CC({bCXY:!0,$i:function(n){this.b(n)},setup:function(){var n=this,i=n.C.BM(n.A.BW("k")[0]);n.iX=i.iX+i.I/2+i.BK,n.iY=i.iY+i.F/2+i.BJ,n.HZ||(n.copy(n.A),n.o.slice=null,n.E7=n.A.E7,n.DF()&&n.parse(!1),n.HZ=!0)},ACA:function(){var n=this,i=(n.B4+n.BL)/2%360,t=ZC.AQ.BN(n.iX,n.iY,n.CO+n.E.bandwidth/2+n.DW,i);return[t[0],t[1]]},JZ:function(n,i,t,C){var e=this,a=e.A.MU();ZC._cp_(i,a);var A=100*e.AB/e.A.A.KO[e.L],l=""+A;return null!==ZC._n_(a.decimals)&&(l=A.toFixed(ZC.BQ(0,ZC._i_(a.decimals)))),e.CV=[["%node-percent-value",l],["%npv",l]],n=e.b(n,i,t,C)},ABF:function(n){var i={},t="in";return null!==ZC._n_(n.o.placement)&&(t=n.o.placement),i.color="out"===t?this.A0:this.C2,i},AC7:function(n){var i=this,t="in";null!==ZC._n_(n.o.placement)&&(t=n.o.placement);var C,e,a,A=n.I,l=n.F,s=(i.B4+i.BL)/2%360;return"out"===t?i.L===i.A.S.length-1?(a=ZC.AQ.BN(i.iX,i.iY,i.A.U5+i.A.S.length*(i.E.bandwidth+i.E.bandspace)+15+n.DW,s),C=s>=0&&s<90||s>=270&&s<360?a[0]+10+i.BK:a[0]-A-10+i.BK,e=a[1]-l/2+i.BJ):(C=-1,e=-1):(C=(a=ZC.AQ.BN(i.iX,i.iY,i.CO+i.E.bandwidth/2+n.DW,s))[0]-A/2+i.BK,e=a[1]-l/2+i.BJ),null!==ZC._n_(n.o.x)&&(C=n.iX),null!==ZC._n_(n.o.y)&&(e=n.iY),[ZC._i_(C),ZC._i_(e),s]},GZ:function(n){var i=this,t=i.b(n);if(n)return t;if(t.AO&&null!==ZC._n_(t.AN)&&""!==t.AN){var C="in";if(null!==ZC._n_(t.o.placement)&&(C=t.o.placement),"out"===C&&i.L===i.A.S.length-1){var e=new ZC.DR(i.A);e.Z=e.C7=i.G.usc()?i.G.mc("top"):i.C.AJ["3d"]||i.G.KC?ZC.AM(i.C.K+"-plots-vb-c"):ZC.AM(i.C.K+"-plot-"+i.A.L+"-vb-c"),e.append(i.A.C3.o),e.B9=i.A0,e.DV="line",e.D=[];var a=(i.B4+i.BL)/2%360,A=ZC.AQ.BN(i.iX,i.iY,i.CO+i.E.bandwidth+t.DW,a),l=ZC.AQ.BN(i.iX,i.iY,i.A.U5+i.A.S.length*(i.E.bandwidth+i.E.bandspace)+15+t.DW,a);A[0]+=i.BK,l[0]+=i.BK,A[1]+=i.BJ,l[1]+=i.BJ,e.D.push(A),a>=0&&a<90||a>=270&&a<360?e.D.push([l[0],l[1],l[0]+10,l[1]]):e.D.push([l[0],l[1],l[0]-10,l[1]]),e.parse(),e.J7=function(n){return i.J7(n)},e.DF()&&e.parse(),e.AO&&e.paint()}}},paint:function(){var n,i=this;i.b();var t=i.C.BM(i.A.BW("k")[0]);i.setup(),i.AI=ZC.CY(t.I,t.F)/2,i.AI=t.JS*i.AI,i.CO=i.A.U5,i.CO<1&&(i.CO=i.A.U5*i.AI);var C=i.A.SO;C<1&&(C=i.A.SO*i.AI);var e=2,a=i.AI-i.CO;if(null!==ZC._n_(i.A.aBandWidths)&&null!==ZC._n_(i.A.aBandWidths[i.L])){(e=ZC._f_(i.A.aBandWidths[i.L]))>1&&(e/=100),e=ZC._i_(a*e),e=ZC.BQ(e,2);for(var A=0,l=0;l<i.L;l++)A+=ZC._f_(i.A.aBandWidths[l]);A>1&&(A/=100),A=ZC._i_(a*A),i.CO+=A,i.AI=i.CO+e}else e=(a-(i.A.S.length-1)*C)/i.A.S.length,e=ZC.BQ(e,2),i.CO+=i.L*(e+C),i.AI=i.CO+e;var s=i.O=i.A.IG(i,i);i.H5(s);var o=new ZC.DR(i.A);o.K=i.K,o.Z=i.A.CR("bl",1),o.C7=i.A.CR("bl",0),o.copy(s),o.iX=i.iX,o.iY=i.iY,o.DV="pie",o.B4=i.B4,o.BL=i.BL,o.CO=i.CO,o.AI=i.AI,o.parse();var r=o.CO;function B(){var n=o.FH(),t=i.C.K+"-node-area "+i.C.K+"-plotset-plot-"+i.A.L+"-node-area zc-node-area",C=ZC.Q.FT("poly",i.A.EA,i.A.IL)+'class="'+t+'" '+i.a11y()+' id="'+i.K+'" coords="'+n+'" />';i.A.A.HE.push(C),i.A.U&&i.A.U.AO&&i.GZ()}if(i.E.bandwidth=e,i.E.bandspace=C,i.A.GF&&!i.C.HK){var Z=o,c={};Z.B4=i.B4,Z.BL=i.BL,c.angleStart=i.B4,c.angleEnd=i.BL;var u=i.A.LD;if(Z.C5=0,c.alpha=s.C5,2===u)Z.BL=i.B4,c.angleEnd=i.BL;else if(3===u)Z.CO=r+i.E.bandwidth,c.slice=r;else if(4===u){var h=ZC.AQ.BN(i.iX,i.iY,i.AI,(i.B4+i.BL)/2);Z.iX=h[0],Z.iY=h[1],c.x=i.iX,c.y=i.iY}else 5===u&&(Z.B4=Z.BL=(i.B4+i.BL)/2,c.angleStart=i.B4,c.angleEnd=i.BL);for(n in i.A.FY)Z[ZC.E6.GN[ZC.EG(n)]]=i.A.FY[n],c[ZC.EG(n)]=s[ZC.E6.GN[ZC.EG(n)]];if(i.C.EQ||(i.C.EQ={}),null!==ZC._n_(i.C.EQ[i.A.L+"-"+i.L]))for(n in i.C.EQ[i.A.L+"-"+i.L])Z[ZC.E6.GN[ZC.EG(n)]]=i.C.EQ[i.A.L+"-"+i.L][n];i.C.EQ[i.A.L+"-"+i.L]={},ZC._cp_(c,i.C.EQ[i.A.L+"-"+i.L]);var p=new ZC.E6(Z,c,i.A.JG,i.A.LB,ZC.E6.RN[i.A.LE],function(){B()});p.AX=i,i.LU(p)}else o.paint(),B()},A15:function(n){var i=this;ZC.move||i.MB({layer:n,type:"shape",initcb:function(){this.copy(i),this.iX=i.iX,this.iY=i.iY,this.DV="pie",this.A0=i.A.BP[3],this.AE=i.A.BP[2],this.B4=i.B4,this.BL=i.BL,this.CO=i.CO,this.AI=i.AI},parsecb:function(){this.o.slice=null}})}});